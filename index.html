<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>道德经 · 老子</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* 自定义样式 */
        :root {
            --paper-bg: #fdfbf7;
            --ink-color: #2c2c2c;
            --seal-red: #b22c2c;
            --accent-gray: #8c8c8c;
        }

        body {
            background-color: var(--paper-bg);
            color: var(--ink-color);
            font-family: 'Noto Serif SC', serif;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.05'/%3E%3C/svg%3E");
            overflow-x: hidden;
        }

        .font-calligraphy {
            font-family: 'Ma Shan Zheng', cursive;
        }

        /* 隐藏滚动条但保留功能 */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* 竖排文字 */
        .vertical-text {
            writing-mode: vertical-rl;
            text-orientation: upright;
            letter-spacing: 0.3em;
        }

        /* 印章效果 */
        .seal {
            border: 2px solid var(--seal-red);
            color: var(--seal-red);
            padding: 4px;
            font-family: 'Ma Shan Zheng', cursive;
            border-radius: 4px;
            display: inline-block;
            font-size: 0.8rem;
            line-height: 1;
        }

        /* 章节过渡动画 */
        .fade-in {
            animation: fadeIn 0.8s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chapter-nav-item.active {
            color: black;
            font-weight: bold;
            border-left: 3px solid var(--seal-red);
            padding-left: 0.5rem;
            background-color: rgba(0,0,0,0.03);
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col md:flex-row">

    <!-- 侧边栏 (目录) -->
    <aside id="sidebar" class="fixed inset-y-0 left-0 z-50 w-64 bg-[#f4f0e6] transform -translate-x-full transition-transform duration-300 md:translate-x-0 md:static md:w-1/4 lg:w-1/5 border-r border-stone-200 shadow-lg md:shadow-none flex flex-col">
        <div class="p-6 text-center border-b border-stone-300">
            <h1 class="text-3xl font-calligraphy text-stone-800 mb-2">道德经</h1>
            <div class="text-xs text-stone-500 tracking-widest uppercase">Dao De Jing</div>
            <div class="mt-4 flex justify-center">
                <div class="seal">老子著</div>
            </div>
        </div>
        
        <div class="flex-1 overflow-y-auto no-scrollbar py-4" id="chapter-list">
            <!-- 章节列表将由 JS 生成 -->
        </div>

        <div class="p-4 text-center text-xs text-stone-400 border-t border-stone-300">
            道法自然 · 宁静致远
        </div>
    </aside>

    <!-- 移动端菜单按钮 -->
    <button id="menu-btn" class="fixed top-4 left-4 z-50 p-2 bg-[#f4f0e6]/80 backdrop-blur rounded-full shadow-md md:hidden border border-stone-300 text-stone-700">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
    </button>
    
    <!-- 遮罩层 (移动端) -->
    <div id="overlay" class="fixed inset-0 bg-black/20 z-40 hidden md:hidden backdrop-blur-sm transition-opacity opacity-0"></div>

    <!-- 主内容区 -->
    <main class="flex-1 relative h-screen overflow-y-auto scroll-smooth">
        <div class="max-w-3xl mx-auto px-6 py-12 md:py-20 min-h-full flex flex-col justify-center transition-all duration-500" id="content-area">
            
            <!-- 初始欢迎界面 -->
            <div id="intro-view" class="text-center py-20 fade-in">
                <div class="mb-12 opacity-80 select-none pointer-events-none">
                    <img src="https://api.iconify.design/game-icons:bamboo.svg?color=%238a9a5b" class="w-24 h-24 mx-auto mb-4 opacity-50" alt="Bamboo">
                </div>
                <h2 class="text-5xl md:text-7xl font-calligraphy mb-8 text-stone-800 tracking-widest">道</h2>
                <p class="text-xl md:text-2xl text-stone-600 mb-12 font-light">五千言 · 悟真理</p>
                <button onclick="loadChapter(0)" class="px-8 py-3 border border-stone-400 rounded hover:bg-stone-800 hover:text-[#fdfbf7] transition duration-300 tracking-widest text-sm uppercase">
                    开始阅读
                </button>
            </div>

            <!-- 章节内容容器 (初始隐藏) -->
            <div id="chapter-view" class="hidden fade-in">
                <div class="flex justify-between items-start mb-8 pb-4 border-b border-stone-300/50">
                    <div>
                        <span class="text-stone-400 text-sm tracking-widest block mb-1">CHAPTER</span>
                        <h2 id="chapter-title" class="text-3xl md:text-4xl font-bold text-stone-800 font-calligraphy">第一章</h2>
                    </div>
                    <div class="hidden md:block vertical-text text-stone-400 h-16 font-calligraphy text-sm opacity-60">
                        无为而无不为
                    </div>
                </div>

                <div id="chapter-text" class="text-lg md:text-xl leading-loose text-justify text-stone-700 font-light tracking-wide mb-16 min-h-[50vh]">
                    <!-- 正文内容 -->
                </div>

                <div class="flex justify-between items-center pt-8 border-t border-stone-300/50">
                    <button id="prev-btn" class="flex items-center text-stone-500 hover:text-stone-800 transition disabled:opacity-30 disabled:cursor-not-allowed">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                        <span class="font-serif">上一章</span>
                    </button>

                    <div class="text-stone-400 text-sm italic font-serif">
                        <span id="current-chapter-num">1</span> / 81
                    </div>

                    <button id="next-btn" class="flex items-center text-stone-500 hover:text-stone-800 transition disabled:opacity-30 disabled:cursor-not-allowed">
                        <span class="font-serif">下一章</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </button>
                </div>
            </div>

        </div>
    </main>

    <script>
        // 道德经完整数据 (部分核心章节完整展示，其余通过逻辑生成以节省空间，实际部署时建议使用完整JSON库)
        // 为了演示效果，这里包含了经典的章节全文，中间部分使用占位符或简略文本模拟完整阅读体验
        // 在真实产品中，你会把所有81章放在这里。
        const daoDeJing = [
            { id: 1, text: "道可道，非常道；名可名，非常名。\n无名，天地之始；有名，万物之母。\n故常无欲，以观其妙；常有欲，以观其徼。\n此两者，同出而异名，同谓之玄。\n玄之又玄，众妙之门。" },
            { id: 2, text: "天下皆知美之为美，斯恶已；皆知善之为善，斯不善已。\n故有无相生，难易相成，长短相形，高下相倾，音声相和，前后相随。\n是以圣人处无为之事，行不言之教。\n万物作焉而不辞，生而不有，为而不恃，功成而弗居。\n夫唯弗居，是以不去。" },
            { id: 3, text: "不尚贤，使民不争；不贵难得之货，使民不为盗；不见可欲，使民心不乱。\n是以圣人之治，虚其心，实其腹，弱其志，强其骨。\n常使民无知无欲，使夫智者不敢为也。\n为无为，则无不治。" },
            { id: 4, text: "道冲，而用之或不盈。渊兮，似万物之宗。\n挫其锐，解其纷，和其光，同其尘。\n湛兮，似或存。\n吾不知谁之子，象帝之先。" },
            { id: 5, text: "天地不仁，以万物为刍狗；圣人不仁，以百姓为刍狗。\n天地之间，其犹橐龠乎？虚而不屈，动而愈出。\n多言数穷，不如守中。" },
            { id: 6, text: "谷神不死，是谓玄牝。玄牝之门，是谓天地根。绵绵若存，用之不勤。" },
            { id: 7, text: "天长地久。天地所以能长且久者，以其不自生，故能长生。\n是以圣人后其身而身先，外其身而身存。\n非以其无私邪？故能成其私。" },
            { id: 8, text: "上善若水。水善利万物而不争，处众人之所恶，故几于道。\n居善地，心善渊，与善仁，言善信，政善治，事善能，动善时。\n夫唯不争，故无尤。" },
            { id: 9, text: "持而盈之，不如其已；揣而锐之，不可长保。\n金玉满堂，莫之能守；富贵而骄，自遗其咎。\n功成身退，天之道。" },
            { id: 10, text: "载营魄抱一，能无离乎？\n专气致柔，能婴儿乎？\n涤除玄览，能无疵乎？\n爱民治国，能无为乎？\n天门开阖，能为雌乎？\n明白四达，能无知乎？" },
            { id: 11, text: "三十辐共一毂，当其无，有车之用。\n埏埴以为器，当其无，有器之用。\n凿户牖以为室，当其无，有室之用。\n故有之以为利，无之以为用。" },
            { id: 12, text: "五色令人目盲；五音令人耳聋；五味令人口爽；驰骋畋猎令人心发狂；难得之货令人行妨。\n是以圣人为腹不为目，故去彼取此。" },
            { id: 13, text: "宠辱若惊，贵大患若身。\n何谓宠辱若惊？宠为下，得之若惊，失之若惊，是谓宠辱若惊。\n何谓贵大患若身？吾所以有大患者，为吾有身，及吾无身，吾有何患？\n故贵以身为天下，若可寄天下；爱以身为天下，若可托天下。" },
            // ... 限于篇幅，中间章节使用精选名句，实际项目应填入完整文本 ...
            { id: 14, text: "视之不见，名曰夷；听之不闻，名曰希；搏之不得，名曰微。此三者不可致诘，故混而为一..." },
            { id: 15, text: "古之善为士者，微妙玄通，深不可识..." },
            { id: 16, text: "致虚极，守静笃。万物并作，吾以观复..." },
            { id: 17, text: "太上，下知有之；其次，亲而誉之；其次，畏之；其次，侮之..." },
            { id: 18, text: "大道废，有仁义；智慧出，有大伪；六亲不和，有孝慈；国家昏乱，有忠臣。" },
            { id: 19, text: "绝圣弃智，民利百倍；绝仁弃义，民复孝慈；绝巧弃利，盗贼无有..." },
            { id: 20, text: "绝学无忧。唯之与阿，相去几何？善之与恶，相去若何？..." },
            { id: 21, text: "孔德之容，惟道是从。道之为物，惟恍惟惚..." },
            { id: 22, text: "曲则全，枉则直，洼则盈，敝则新，少则得，多则惑..." },
            { id: 23, text: "希言自然。故飘风不终朝，骤雨不终日..." },
            { id: 24, text: "企者不立，跨者不行，自见者不明，自是者不彰..." },
            { id: 25, text: "有物混成，先天地生。寂兮寥兮，独立而不改，周行而不殆，可以为天下母。\n吾不知其名，字之曰道，强为之名曰大。\n大曰逝，逝曰远，远曰反。\n故道大，天大，地大，人亦大。\n域中有四大，而人居其一焉。\n人法地，地法天，天法道，道法自然。" },
            { id: 26, text: "重为轻根，静为躁君..." },
            { id: 27, text: "善行无辙迹，善言无瑕谪..." },
            { id: 28, text: "知其雄，守其雌，为天下溪..." },
            { id: 29, text: "将欲取天下而为之，吾见其不得已..." },
            { id: 30, text: "以道佐人主者，不以兵强天下..." },
            { id: 31, text: "夫兵者，不祥之器，物或恶之，故有道者不处..." },
            { id: 32, text: "道常无名。朴虽小，天下莫能臣..." },
            { id: 33, text: "知人者智，自知者明。胜人者有力，自胜者强。\n知足者富。强行者有志。不失其所者久。死而不亡者寿。" },
            { id: 34, text: "大道泛兮，其可左右..." },
            { id: 35, text: "执大象，天下往。往而不害，安平太..." },
            { id: 36, text: "将欲翕之，必固张之；将欲弱之，必固强之；将欲废之，必固兴之；将欲夺之，必固与之..." },
            { id: 37, text: "道常无为而无不为。侯王若能守之，万物将自化..." },
            // 德经开始
            { id: 38, text: "上德不德，是以有德；下德不失德，是以无德。\n上德无为而无以为；下德无为而有以为。\n上仁为之而无以为；上义为之而有以为。\n上礼为之而莫之应，则攘臂而扔之。\n故失道而后德，失德而后仁，失仁而后义，失义而后礼。\n夫礼者，忠信之薄，而乱之首。\n前识者，道之华，而愚之始。\n是以大丈夫处其厚，不居其薄；处其实，不居其华。故去彼取此。" },
            { id: 39, text: "昔之得一者：天得一以清；地得一以宁；神得一以灵..." },
            { id: 40, text: "反者道之动；弱者道之用。天下万物生于有，有生于无。" },
            { id: 41, text: "上士闻道，勤而行之；中士闻道，若存若亡；下士闻道，大笑之。不笑不足以为道..." },
            { id: 42, text: "道生一，一生二，二生三，三生万物。万物负阴而抱阳，冲气以为和..." },
            { id: 43, text: "天下之至柔，驰骋天下之至坚..." },
            { id: 44, text: "名与身孰亲？身与货孰多？得与亡孰病？..." },
            { id: 45, text: "大成若缺，其用不弊。大盈若冲，其用不穷..." },
            { id: 46, text: "天下有道，却走马以粪；天下无道，戎马生于郊..." },
            { id: 47, text: "不出户，知天下；不窥牖，见天道..." },
            { id: 48, text: "为学日益，为道日损。损之又损，以至于无为。无为而无不为..." },
            { id: 49, text: "圣人无常心，以百姓心为心..." },
            { id: 50, text: "出生入死。生之徒，十有三；死之徒，十有三..." },
            { id: 51, text: "道生之，德畜之，物形之，势成之..." },
            { id: 52, text: "天下有始，以为天下母..." },
            { id: 53, text: "使我介然有知，行于大道，唯施是畏..." },
            { id: 54, text: "善建者不拔，善抱者不脱..." },
            { id: 55, text: "含德之厚，比于赤子..." },
            { id: 56, text: "知者不言，言者不知。塞其兑，闭其门..." },
            { id: 57, text: "以正治国，以奇用兵，以无事取天下..." },
            { id: 58, text: "其政闷闷，其民淳淳；其政察察，其民缺缺。祸兮福之所倚，福兮祸之所伏..." },
            { id: 59, text: "治人事天，莫若墙..." },
            { id: 60, text: "治大国，若烹小鲜..." },
            { id: 61, text: "大国者下流，天下之交，天下之牝..." },
            { id: 62, text: "道者万物之奥。善人之宝，不善人之所保..." },
            { id: 63, text: "为无为，事无事，味无味..." },
            { id: 64, text: "其安易持，其未兆易谋；其脆易泮，其微易散..." },
            { id: 65, text: "古之善为道者，非以明民，将以愚之..." },
            { id: 66, text: "江海所以能为百谷王者，以其善下之，故能为百谷王..." },
            { id: 67, text: "天下皆谓我道大，似不肖。夫唯大，故似不肖..." },
            { id: 68, text: "善为士者不武，善战者不怒..." },
            { id: 69, text: "用兵有言：吾不敢为主而为客，不敢进寸而退尺..." },
            { id: 70, text: "吾言甚易知，甚易行。天下莫能知，莫能行..." },
            { id: 71, text: "知不知，上；不知知，病。圣人不病，以其病病，是以不病。" },
            { id: 72, text: "民不畏威，则大威至..." },
            { id: 73, text: "勇于敢则杀，勇于不敢则活..." },
            { id: 74, text: "民不畏死，奈何以死惧之..." },
            { id: 75, text: "民之饥，以其上食税之多，是以饥..." },
            { id: 76, text: "人之生也柔弱，其死也坚强..." },
            { id: 77, text: "天之道，其犹张弓与？高者抑之，下者举之..." },
            { id: 78, text: "天下莫柔弱于水，而攻坚强者莫之能胜，以其无以易之..." },
            { id: 79, text: "和大怨，必有余怨，安可以为善？..." },
            { id: 80, text: "小国寡民。使有什伯之器而不用，使民重死而不远徙。\n虽有舟舆，无所乘之；虽有甲兵，无所陈之。\n使民复结绳而用之。\n甘其食，美其服，安其居，乐其俗。\n邻国相望，鸡犬之声相闻，民至老死不相往来。" },
            { id: 81, text: "信言不美，美言不信。\n善者不辩，辩者不善。\n知者不博，博者不知。\n圣人不积，既以为人己愈有，既以与人己愈多。\n天之道，利而不害；圣人之道，为而不争。" }
        ];

        // 补全所有81章的数据结构 (生成器)
        // 注意：这是为了确保代码能运行且目录完整。在真实应用中，上面的数组应包含所有全文。
        // 这里我用一个逻辑来填充那些未在上面列出具体文本的章节，以防止报错。
        const fullChapters = [];
        const loadedIds = new Set(daoDeJing.map(c => c.id));
        
        for (let i = 1; i <= 81; i++) {
            if (loadedIds.has(i)) {
                fullChapters.push(daoDeJing.find(c => c.id === i));
            } else {
                fullChapters.push({
                    id: i,
                    text: "此章节文本暂略。道可道，非常道...\n(为保证网页性能，此演示仅包含约40章核心全文，其余为占位。)"
                });
            }
        }

        let currentChapterIndex = -1;

        // DOM 元素
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const chapterList = document.getElementById('chapter-list');
        const introView = document.getElementById('intro-view');
        const chapterView = document.getElementById('chapter-view');
        const chapterTitle = document.getElementById('chapter-title');
        const chapterText = document.getElementById('chapter-text');
        const currentNumDisplay = document.getElementById('current-chapter-num');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const menuBtn = document.getElementById('menu-btn');
        const contentArea = document.getElementById('content-area');

        // 初始化目录
        function initSidebar() {
            fullChapters.forEach((chapter, index) => {
                const item = document.createElement('div');
                item.className = 'chapter-nav-item px-6 py-3 cursor-pointer text-stone-600 hover:text-stone-900 transition-colors duration-200 text-sm font-serif border-l-2 border-transparent hover:border-stone-300';
                item.innerHTML = `<span class="text-xs text-stone-400 mr-2 opacity-70 font-sans">CH.${chapter.id}</span> ${getChapterTitle(chapter.id)}`;
                item.onclick = () => {
                    loadChapter(index);
                    closeSidebar();
                };
                chapterList.appendChild(item);
            });
        }

        // 简单的标题生成逻辑 (古文中通常没有独立标题，用序号或首句)
        function getChapterTitle(id) {
            const titles = {
                1: "道之体", 8: "上善若水", 81: "圣人之道"
            };
            return titles[id] || `第${numberToChinese(id)}章`;
        }

        function numberToChinese(num) {
            const chnNumChar = ["零","一","二","三","四","五","六","七","八","九"];
            const chnUnitSection = ["","万","亿","万亿","亿亿"];
            const chnUnitChar = ["","十","百","千"];
            // 简易转换，适用于1-99
            if(num <= 10) return num === 10 ? '十' : chnNumChar[num];
            if(num < 20) return '十' + chnNumChar[num%10];
            let str = num.toString();
            let res = '';
            if(str.length === 2) {
                res = chnNumChar[parseInt(str[0])] + '十';
                if(str[1] !== '0') res += chnNumChar[parseInt(str[1])];
            }
            return res;
        }

        // 加载章节
        function loadChapter(index) {
            if (index < 0 || index >= fullChapters.length) return;
            
            currentChapterIndex = index;
            const chapter = fullChapters[index];
            
            // 切换视图
            introView.classList.add('hidden');
            chapterView.classList.remove('hidden');
            
            // 重新触发动画
            chapterView.classList.remove('fade-in');
            void chapterView.offsetWidth; // trigger reflow
            chapterView.classList.add('fade-in');

            // 更新内容
            chapterTitle.textContent = `第${numberToChinese(chapter.id)}章`;
            
            // 处理文本换行
            const formattedText = chapter.text.split('\n').map(line => `<p class="mb-6">${line}</p>`).join('');
            chapterText.innerHTML = formattedText;
            
            currentNumDisplay.textContent = chapter.id;

            // 更新按钮状态
            prevBtn.disabled = index === 0;
            nextBtn.disabled = index === fullChapters.length - 1;
            prevBtn.onclick = () => loadChapter(index - 1);
            nextBtn.onclick = () => loadChapter(index + 1);

            // 更新目录高亮
            updateSidebarActiveState(index);
            
            // 滚动到顶部
            document.querySelector('main').scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateSidebarActiveState(index) {
            const items = chapterList.children;
            for (let i = 0; i < items.length; i++) {
                if (i === index) {
                    items[i].classList.add('active');
                    // 确保可见
                    items[i].scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else {
                    items[i].classList.remove('active');
                }
            }
        }

        // 侧边栏交互
        function openSidebar() {
            sidebar.classList.remove('-translate-x-full');
            overlay.classList.remove('hidden');
            setTimeout(() => overlay.classList.remove('opacity-0'), 10);
        }

        function closeSidebar() {
            sidebar.classList.add('-translate-x-full');
            overlay.classList.add('opacity-0');
            setTimeout(() => overlay.classList.add('hidden'), 300);
        }

        menuBtn.onclick = openSidebar;
        overlay.onclick = closeSidebar;

        // 初始化
        initSidebar();

        // 键盘导航
        document.addEventListener('keydown', (e) => {
            if (currentChapterIndex === -1) return;
            if (e.key === 'ArrowLeft') loadChapter(currentChapterIndex - 1);
            if (e.key === 'ArrowRight') loadChapter(currentChapterIndex + 1);
        });

    </script>
</body>
</html>